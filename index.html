<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
</head>
<body>
    <a-scene>
        <a-assets>
            <a-asset-item id="myModel" src="Z-line-work-18.glb"></a-asset-item>
        </a-assets>

        <a-entity gltf-model="#myModel" position="0 0 -5" scale="1 1 1" rotation="90 0 0" animation-mixer></a-entity>
    </a-scene>

    <script>
        window.addEventListener('message', function(event) {
            const data = event.data;
            if (data.color) {
                const model = document.querySelector('[gltf-model]');
                model.addEventListener('model-loaded', () => {
                    const mesh = model.getObject3D('mesh');
                    mesh.traverse((node) => {
                        if (node.isMesh) {
                            node.material.color.set(data.color);
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
